EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 7
Title "MIDI Audio Box"
Date "2021-09-21"
Rev "v01"
Comp ""
Comment1 ""
Comment2 ""
Comment3 "Authors: Iver Håkonsen, Halvor Bjørstad"
Comment4 "TDT4295 Computer Design Project"
$EndDescr
$Sheet
S 1050 2550 700  250 
U 613F97F2
F0 "MIDI-IN" 50
F1 "MIDI-IN.sch" 50
F2 "MIDI_IN" O R 1750 2700 50 
$EndSheet
Wire Wire Line
	1750 2700 1950 2700
Wire Bus Line
	6150 3350 6800 3350
$Comp
L Switch:SW_Push SW1
U 1 1 6145369A
P 800 6450
F 0 "SW1" V 650 6500 50  0000 L CNN
F 1 "FBKey0" V 950 6500 50  0000 L CNN
F 2 "" H 800 6650 50  0001 C CNN
F 3 "~" H 800 6650 50  0001 C CNN
	1    800  6450
	0    1    1    0   
$EndComp
$Comp
L Device:R R3
U 1 1 61453C7F
P 800 7000
F 0 "R3" H 870 7046 50  0000 L CNN
F 1 "10k" H 870 6955 50  0000 L CNN
F 2 "" V 730 7000 50  0001 C CNN
F 3 "~" H 800 7000 50  0001 C CNN
	1    800  7000
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_Push SW2
U 1 1 6145516D
P 1250 6450
F 0 "SW2" V 1100 6500 50  0000 L CNN
F 1 "FBKey1" V 1400 6500 50  0000 L CNN
F 2 "" H 1250 6650 50  0001 C CNN
F 3 "~" H 1250 6650 50  0001 C CNN
	1    1250 6450
	0    1    1    0   
$EndComp
$Comp
L Device:R R4
U 1 1 61455173
P 1250 7000
F 0 "R4" H 1320 7046 50  0000 L CNN
F 1 "10k" H 1320 6955 50  0000 L CNN
F 2 "" V 1180 7000 50  0001 C CNN
F 3 "~" H 1250 7000 50  0001 C CNN
	1    1250 7000
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_Push SW3
U 1 1 61455E9E
P 1700 6450
F 0 "SW3" V 1550 6500 50  0000 L CNN
F 1 "FBKey2" V 1850 6500 50  0000 L CNN
F 2 "" H 1700 6650 50  0001 C CNN
F 3 "~" H 1700 6650 50  0001 C CNN
	1    1700 6450
	0    1    1    0   
$EndComp
$Comp
L Device:R R5
U 1 1 61455EA4
P 1700 7000
F 0 "R5" H 1770 7046 50  0000 L CNN
F 1 "10k" H 1770 6955 50  0000 L CNN
F 2 "" V 1630 7000 50  0001 C CNN
F 3 "~" H 1700 7000 50  0001 C CNN
	1    1700 7000
	1    0    0    -1  
$EndComp
Wire Wire Line
	800  6250 800  6150
Wire Wire Line
	1250 6250 1250 6150
Wire Wire Line
	1700 6250 1700 6150
Wire Wire Line
	1700 6150 2150 6150
$Comp
L power:+3.3V #PWR0101
U 1 1 61456654
P 3100 6150
F 0 "#PWR0101" H 3100 6000 50  0001 C CNN
F 1 "+3.3V" V 3115 6278 50  0000 L CNN
F 2 "" H 3100 6150 50  0001 C CNN
F 3 "" H 3100 6150 50  0001 C CNN
	1    3100 6150
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0102
U 1 1 61457106
P 3100 7200
F 0 "#PWR0102" H 3100 6950 50  0001 C CNN
F 1 "GND" V 3105 7072 50  0000 R CNN
F 2 "" H 3100 7200 50  0001 C CNN
F 3 "" H 3100 7200 50  0001 C CNN
	1    3100 7200
	0    -1   -1   0   
$EndComp
Wire Wire Line
	800  6850 800  6750
Wire Wire Line
	800  7200 800  7150
Wire Wire Line
	1250 7150 1250 7200
Wire Wire Line
	1700 7150 1700 7200
Wire Wire Line
	1700 7200 2150 7200
Wire Wire Line
	1250 6850 1250 6750
Wire Wire Line
	1700 6850 1700 6750
Wire Wire Line
	800  6750 700  6750
Connection ~ 800  6750
Wire Wire Line
	800  6750 800  6650
Wire Wire Line
	1250 6750 1150 6750
Connection ~ 1250 6750
Wire Wire Line
	1250 6750 1250 6650
Wire Wire Line
	1700 6750 1600 6750
Connection ~ 1700 6750
Wire Wire Line
	1700 6750 1700 6650
Text Label 700  6100 0    50   ~ 0
FBKey0
Text Label 1150 6100 0    50   ~ 0
FBKey1
Text Label 1600 6100 0    50   ~ 0
FBKey2
Wire Wire Line
	800  7200 1250 7200
Connection ~ 1700 7200
Connection ~ 1250 7200
Wire Wire Line
	1250 7200 1700 7200
Wire Wire Line
	800  6150 1250 6150
Connection ~ 1700 6150
Connection ~ 1250 6150
Wire Wire Line
	1250 6150 1700 6150
Text Notes 700  7400 0    50   ~ 10
Fallback Input Keys
Text Notes 700  7650 0    50   ~ 0
Three input switches that work as a fallback input source\nif there is something wrong with the MIDI input. May be\nprogrammed to do anything else as well.\n
Wire Notes Line
	3050 5950 3050 7700
Wire Notes Line
	3050 7700 550  7700
Wire Notes Line
	550  7700 550  5950
Wire Wire Line
	700  6000 700  6750
Wire Wire Line
	1150 3850 1950 3850
Wire Wire Line
	1150 3850 1150 6750
Wire Wire Line
	1600 6000 1600 6750
Wire Notes Line
	3050 5950 550  5950
Wire Wire Line
	1100 3800 1500 3800
Wire Wire Line
	1200 3900 1500 3900
Wire Wire Line
	1100 6000 1100 3800
Wire Wire Line
	700  6000 1100 6000
Wire Wire Line
	1200 6000 1200 3900
Wire Wire Line
	1600 6000 1200 6000
Wire Wire Line
	1500 3900 1500 3950
Wire Wire Line
	1500 3950 1950 3950
Wire Wire Line
	1500 3800 1500 3750
Wire Wire Line
	1500 3750 1950 3750
$Sheet
S 8500 2550 1000 1150
U 61447D69
F0 "AMP_Analog_out" 50
F1 "AMP_Analog_out.sch" 50
F2 "IN_L" I L 8500 3150 50 
F3 "IN_R" I L 8500 3250 50 
F4 "SHUTDOWN" I L 8500 2650 50 
F5 "AUDIO_OUT_L" O R 9500 3150 50 
F6 "AUDIO_OUT_R" O R 9500 3250 50 
$EndSheet
Wire Wire Line
	7950 3250 8500 3250
Wire Wire Line
	7950 3150 8500 3150
$Comp
L Connector:AudioJack3 J2
U 1 1 614686B4
P 10300 3150
F 0 "J2" H 10020 3175 50  0000 R CNN
F 1 "AudioJack3" H 10020 3084 50  0000 R CNN
F 2 "" H 10300 3150 50  0001 C CNN
F 3 "~" H 10300 3150 50  0001 C CNN
	1    10300 3150
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR0103
U 1 1 614690FB
P 10050 2850
F 0 "#PWR0103" H 10050 2600 50  0001 C CNN
F 1 "GND" H 10055 2677 50  0000 C CNN
F 2 "" H 10050 2850 50  0001 C CNN
F 3 "" H 10050 2850 50  0001 C CNN
	1    10050 2850
	-1   0    0    1   
$EndComp
Wire Wire Line
	10050 3050 10100 3050
Wire Wire Line
	10050 2850 10050 3050
Wire Wire Line
	9500 3150 10100 3150
Wire Wire Line
	9500 3250 10100 3250
$Sheet
S 1050 800  1400 1200
U 61483B8A
F0 "Power Supply" 50
F1 "Power_supply.sch" 50
$EndSheet
Wire Wire Line
	4350 3850 3850 3850
Wire Wire Line
	3850 3950 4350 3950
Wire Wire Line
	4350 3700 3850 3700
Wire Wire Line
	6150 3650 6800 3650
$Sheet
S 6800 2550 1150 2450
U 61496F7B
F0 "DAC" 50
F1 "DAC.sch" 50
F2 "I2S[0..2]" I L 6800 3350 50 
F3 "DAC_SYS_CLK" I L 6800 3650 50 
F4 "DAC_MODE_DATA" I L 6800 4450 50 
F5 "DAC_MODE_CTRL_CLK" I L 6800 4550 50 
F6 "DAC_MODE_LATCH" I L 6800 4650 50 
F7 "OUT_L" O R 7950 3150 50 
F8 "OUT_R" O R 7950 3250 50 
F9 "DAC_ZERO_L" O L 6800 2900 50 
F10 "DAC_ZERO_R" O L 6800 3000 50 
$EndSheet
Wire Bus Line
	3850 3350 4350 3350
$Sheet
S 4350 2550 1800 1550
U 613F0EEF
F0 "FPGA" 50
F1 "FPGA.sch" 50
F2 "I2S[0..2]" O R 6150 3350 50 
F3 "MCU_SPI[0..3]" B L 4350 3350 50 
F4 "done" O L 4350 3850 50 
F5 "program_b" I L 4350 3950 50 
F6 "MCU_clock_in" I L 4350 3700 50 
F7 "DAC_ZERO_L" I R 6150 2900 50 
F8 "DAC_ZERO_R" I R 6150 3000 50 
F9 "DAC_SYS_CLK" O R 6150 3650 50 
F10 "AMPLIFIER_SHUTDOWN" O R 6150 2650 50 
$EndSheet
$Sheet
S 1950 2550 1900 2450
U 6139E7E0
F0 "MCU" 50
F1 "MCU.sch" 50
F2 "MIDI_IN" I L 1950 2700 50 
F3 "FPGA_SPI[0..3]" B R 3850 3350 50 
F4 "FBKey0" I L 1950 3750 50 
F5 "FBKey1" I L 1950 3850 50 
F6 "FBKey2" I L 1950 3950 50 
F7 "external_clock_out" O R 3850 3700 50 
F8 "FPGA_done" I R 3850 3850 50 
F9 "FPGA_program_b" O R 3850 3950 50 
F10 "DAC_MODE_CTRL_CLK" O R 3850 4550 50 
F11 "DAC_MODE_DATA" O R 3850 4450 50 
F12 "DAC_MODE_LATCH" O R 3850 4650 50 
F13 "FBKey3" I L 1950 4050 50 
F14 "FBKey4" I L 1950 4150 50 
$EndSheet
Wire Wire Line
	3850 4650 6800 4650
Wire Wire Line
	6800 4550 3850 4550
Wire Wire Line
	3850 4450 6800 4450
Wire Wire Line
	6800 3000 6150 3000
Wire Wire Line
	6150 2900 6800 2900
Wire Wire Line
	6150 2650 6350 2650
Wire Wire Line
	6350 2650 6350 2400
Wire Wire Line
	6350 2400 8350 2400
Wire Wire Line
	8350 2400 8350 2650
Wire Wire Line
	8350 2650 8500 2650
$Comp
L Switch:SW_Push SW4
U 1 1 6171C195
P 2150 6450
F 0 "SW4" V 2000 6500 50  0000 L CNN
F 1 "FBKey2" V 2300 6500 50  0000 L CNN
F 2 "" H 2150 6650 50  0001 C CNN
F 3 "~" H 2150 6650 50  0001 C CNN
	1    2150 6450
	0    1    1    0   
$EndComp
$Comp
L Device:R R42
U 1 1 6171C19B
P 2150 7000
F 0 "R42" H 2220 7046 50  0000 L CNN
F 1 "10k" H 2220 6955 50  0000 L CNN
F 2 "" V 2080 7000 50  0001 C CNN
F 3 "~" H 2150 7000 50  0001 C CNN
	1    2150 7000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2150 6250 2150 6150
Wire Wire Line
	2150 7150 2150 7200
Wire Wire Line
	2150 6850 2150 6750
Wire Wire Line
	2150 6750 2050 6750
Connection ~ 2150 6750
Wire Wire Line
	2150 6750 2150 6650
$Comp
L Switch:SW_Push SW5
U 1 1 6171D74D
P 2600 6450
F 0 "SW5" V 2450 6500 50  0000 L CNN
F 1 "FBKey2" V 2750 6500 50  0000 L CNN
F 2 "" H 2600 6650 50  0001 C CNN
F 3 "~" H 2600 6650 50  0001 C CNN
	1    2600 6450
	0    1    1    0   
$EndComp
$Comp
L Device:R R43
U 1 1 6171D753
P 2600 7000
F 0 "R43" H 2670 7046 50  0000 L CNN
F 1 "10k" H 2670 6955 50  0000 L CNN
F 2 "" V 2530 7000 50  0001 C CNN
F 3 "~" H 2600 7000 50  0001 C CNN
	1    2600 7000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2600 6250 2600 6150
Wire Wire Line
	2600 7150 2600 7200
Wire Wire Line
	2600 6850 2600 6750
Wire Wire Line
	2600 6750 2500 6750
Connection ~ 2600 6750
Wire Wire Line
	2600 6750 2600 6650
Connection ~ 2150 7200
Wire Wire Line
	2150 7200 2600 7200
Connection ~ 2600 7200
Wire Wire Line
	2600 7200 3100 7200
Connection ~ 2150 6150
Wire Wire Line
	2150 6150 2600 6150
Connection ~ 2600 6150
Wire Wire Line
	2600 6150 3100 6150
Wire Wire Line
	2050 5900 1250 5900
Wire Wire Line
	1250 5900 1250 4000
Wire Wire Line
	1250 4000 1450 4000
Wire Wire Line
	1450 4000 1450 4050
Wire Wire Line
	1450 4050 1950 4050
Wire Wire Line
	2050 5900 2050 6750
Wire Wire Line
	2500 5850 1300 5850
Wire Wire Line
	1300 5850 1300 4100
Wire Wire Line
	1300 4100 1400 4100
Wire Wire Line
	1400 4100 1400 4150
Wire Wire Line
	1400 4150 1950 4150
Wire Wire Line
	2500 5850 2500 6750
$EndSCHEMATC
